<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Rexergy | Usage Habits</title>
    <!-- base:css -->
    <link rel="stylesheet" href="../../vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="../../vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="../../css/style.css">
    <!-- endinject -->
    <link rel="shortcut icon" href="../../images/favicon.png"/>

    <!--jquery-->
    <script src="../../js/jquery-3.3.1.min.js" type="text/javascript" charset="utf-8"></script>

    <style>
        .user_bg {
            background-color: #01baef;
            background-image: linear-gradient(360deg, #01baef 0%, #20bf55 80%);
        }

    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>

    <!-- Plugin js for this page-->
    <script src="../../vendors/chart.js/Chart.min.js"></script>

</head>

<body>
<div class="adcenter"></div>
<div class="container-scroller d-flex">
    <!-- partial:./partials/_sidebar.html -->
    <nav class="sidebar sidebar-offcanvas" id="sidebar">
        <ul class="nav">
            <li class="nav-item sidebar-category">
                <p>Navigation</p>
                <span></span>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="../../dashboard.html">
                    <i class="mdi mdi-view-quilt menu-icon"></i>
                    <span class="menu-title">Dashboard</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="habits.html">
                    <i class="mdi mdi-flash menu-icon"></i>
                    <span class="menu-title">Usage Habits</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="recommend.html">
                    <i class="mdi mdi-star menu-icon"></i>
                    <span class="menu-title">Plan Recommend</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="profile.html">
                    <i class="mdi mdi-account menu-icon"></i>
                    <span class="menu-title">User Profile</span>
                </a>
            </li>

        </ul>
    </nav>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
        <!-- partial:./partials/_navbar.html -->
        <nav class="navbar col-lg-12 col-12 px-0 py-0 py-lg-4 d-flex flex-row">
            <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
                <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
                    <span class="mdi mdi-menu"></span>
                </button>
                <div class="navbar-brand-wrapper">
                    <a class="navbar-brand brand-logo" href="index.html"><img src="../../images/logo.svg"
                                                                              alt="logo"/></a>
                    <a class="navbar-brand brand-logo-mini" href="index.html"><img src="../../images/logo-mini.svg"
                                                                                   alt="logo"/></a>
                </div>
                <ul class="navbar-nav navbar-nav-right">

                </ul>
                <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button"
                        data-toggle="offcanvas">
                    <span class="mdi mdi-menu"></span>
                </button>
            </div>
            <div class="navbar-menu-wrapper navbar-search-wrapper d-none d-lg-flex align-items-center">
                <ul class="navbar-nav mr-lg-2">
                    <li class="nav-item nav-search d-none d-lg-block">
                        <h4 class="font-weight-bold mb-0 d-none d-md-block mt-1 text-black">Welcome back, Alex Xiu</h4>
                    </li>
                </ul>

            </div>
        </nav>
        <!-- partial -->
        <div class="main-panel">
            <div class="content-wrapper">
                <div class="row">
                    <div class="col-md-12 col-xl-12 grid-margin stretch-card">
                        <div class="row w-100 flex-grow">

                            <div class="col-md-4 grid-margin stretch-card">
                                <div class="card text-white">
                                    <div class="card-body user_bg">
                                        <div class="col-md-12" align="center">
                                            <img src="../../images/faces/face1.jpg" alt="image"/>
                                            <p class="display-4">Alex</p>
                                            <p>Platinum member</p>
                                        </div>
                                        <div class="py-4">
                                            <p class="clearfix">
                                                <span class="float-left"><i class="mdi mdi-city icon-md"></i> House Type </span>
                                                <span class="float-right">Apartment</span>
                                            </p>
                                            <p class="clearfix">
                                                <span class="float-left"><i class="mdi mdi-numeric icon-md"></i> Room No. </span>
                                                <span class="float-right">3</span>
                                            </p>
                                            <p class="clearfix">
                                                <span class="float-left"><i
                                                        class="mdi mdi-map-marker-radius icon-md"></i> Address </span>
                                                <span class="float-right">Level 1, 28 University Ave, Canberra, ACT 2600</span>
                                            </p>

                                        </div>

                                    </div>
                                </div>
                            </div>

                            <div class="col-md-8 grid-margin stretch-card">
                                <div class="card">
                                    <div class="card-body pb-0">
                                        <div class="d-flex align-items-center py-4">
                                            <p class="card-title mb-0 mr-1">Current Energy Plan</p>
                                        </div>

                                        <div class="py-4">
                                            <p class="clearfix">
                                                <span class="float-left">Retailor Name</span>
                                                <span class="float-right text-success">ActewAGL</span>
                                            </p>
                                            <p class="clearfix">
                                                <span class="float-left">Plan Name</span>
                                                <span class="float-right text-success">Home TOU - 15% off usage</span>
                                            </p>
                                            <p class="clearfix">
                                                <span class="float-left">Plan ID</span>
                                                <span class="float-right text-success">ACT106106MRE1</span>
                                            </p>
                                            <p class="clearfix">
                                                <span class="float-left">Tariff Type</span>
                                                <span class="float-right text-success">Time of use</span>
                                            </p>
                                            <p class="clearfix">
                                                <span class="float-left">Contract Period</span>
                                                <span class="float-right text-success">1 year</span>
                                            </p>
                                            <p class="clearfix">
                                                <span class="float-left">Estimated price</span>
                                                <span class="float-right text-success">$ 1,720</span>
                                            </p>

                                        </div>


                                        <div class="pb-4">
                                            <canvas id="chart1" width="1000" height="300" class="chartjs-render-monitor"
                                                    style="display: block;"></canvas>
                                        </div>

                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Graph Type</label>
                                            <div class="col-sm-3">
                                                <select class="form-control" id="type">
                                                    <option value="line">Line</option>
                                                    <option value="bar">Bar</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Time Slot</label>
                                            <div class="col-sm-3">
                                                <select class="form-control" id="unit">
                                                    <option value="second">Second</option>
                                                    <option value="minute">Minute</option>
                                                    <option value="hour">Hour</option>
                                                    <option value="day" selected="">Day</option>
                                                    <option value="month">Month</option>
                                                    <option value="year">Year</option>
                                                </select>
                                            </div>
                                        </div>

                                        <button id="update" class="btn btn-primary mb-2">Apply</button>

                                        <script>
                                            function generateData() {
                                                var unit = document.getElementById('unit').value;

                                                function unitLessThanDay() {
                                                    return unit === 'second' || unit === 'minute' || unit === 'hour';
                                                }

                                                function beforeNineThirty(date) {
                                                    return date.hour() < 9 || (date.hour() === 9 && date.minute() < 30);
                                                }

                                                // Returns true if outside 9:30am-4pm on a weekday
                                                function outsideMarketHours(date) {
                                                    if (date.isoWeekday() > 5) {
                                                        return true;
                                                    }
                                                    if (unitLessThanDay() && (beforeNineThirty(date) || date.hour() > 16)) {
                                                        return true;
                                                    }
                                                    return false;
                                                }

                                                function randomNumber(min, max) {
                                                    return Math.random() * (max - min) + min;
                                                }

                                                function randomBar(date, lastClose) {
                                                    var open = randomNumber(lastClose * 0.95, lastClose * 1.05).toFixed(2);
                                                    var close = randomNumber(open * 0.95, open * 1.05).toFixed(2);
                                                    return {
                                                        t: date.valueOf(),
                                                        y: close
                                                    };
                                                }

                                                var date = moment('Jan 01 1990', 'MMM DD YYYY');
                                                var now = moment();
                                                var data = [];
                                                var lessThanDay = unitLessThanDay();
                                                for (; data.length < 600 && date.isBefore(now); date = date.clone().add(1, unit).startOf(unit)) {
                                                    if (outsideMarketHours(date)) {
                                                        if (!lessThanDay || !beforeNineThirty(date)) {
                                                            date = date.clone().add(date.isoWeekday() >= 5 ? 8 - date.isoWeekday() : 1, 'day');
                                                        }
                                                        if (lessThanDay) {
                                                            date = date.hour(9).minute(30).second(0);
                                                        }
                                                    }
                                                    data.push(randomBar(date, data.length > 0 ? data[data.length - 1].y : 30));
                                                }

                                                return data;
                                            }

                                            var ctx = document.getElementById('chart1').getContext('2d');
                                            ctx.canvas.width = 1000;
                                            ctx.canvas.height = 300;

                                            // var color = Chart.helpers.color;
                                            var cfg = {
                                                data: {
                                                    datasets: [{
                                                        label: 'Energy usage',
                                                        backgroundColor: '#ff4c5b',
                                                        borderColor: '#ff4c5b',
                                                        data: generateData(),
                                                        type: 'line',
                                                        pointRadius: 0,
                                                        fill: false,
                                                        lineTension: 0,
                                                        borderWidth: 2
                                                    }]
                                                },
                                                options: {
                                                    animation: {
                                                        duration: 0
                                                    },
                                                    scales: {
                                                        xAxes: [{
                                                            type: 'time',
                                                            distribution: 'series',
                                                            offset: true,
                                                            ticks: {
                                                                major: {
                                                                    enabled: true,
                                                                    fontStyle: 'bold'
                                                                },
                                                                source: 'data',
                                                                autoSkip: true,
                                                                autoSkipPadding: 75,
                                                                maxRotation: 0,
                                                                sampleSize: 100
                                                            },
                                                            afterBuildTicks: function (scale, ticks) {
                                                                var majorUnit = scale._majorUnit;
                                                                var firstTick = ticks[0];
                                                                var i, ilen, val, tick, currMajor, lastMajor;

                                                                val = moment(ticks[0].value);
                                                                if ((majorUnit === 'minute' && val.second() === 0)
                                                                    || (majorUnit === 'hour' && val.minute() === 0)
                                                                    || (majorUnit === 'day' && val.hour() === 9)
                                                                    || (majorUnit === 'month' && val.date() <= 3 && val.isoWeekday() === 1)
                                                                    || (majorUnit === 'year' && val.month() === 0)) {
                                                                    firstTick.major = true;
                                                                } else {
                                                                    firstTick.major = false;
                                                                }
                                                                lastMajor = val.get(majorUnit);

                                                                for (i = 1, ilen = ticks.length; i < ilen; i++) {
                                                                    tick = ticks[i];
                                                                    val = moment(tick.value);
                                                                    currMajor = val.get(majorUnit);
                                                                    tick.major = currMajor !== lastMajor;
                                                                    lastMajor = currMajor;
                                                                }
                                                                return ticks;
                                                            }
                                                        }],
                                                        yAxes: [{
                                                            gridLines: {
                                                                drawBorder: false
                                                            },
                                                            scaleLabel: {
                                                                display: true,
                                                                labelString: 'Consumption (kWH)'
                                                            }
                                                        }]
                                                    },
                                                    tooltips: {
                                                        intersect: false,
                                                        mode: 'index',
                                                        callbacks: {
                                                            label: function (tooltipItem, myData) {
                                                                var label = myData.datasets[tooltipItem.datasetIndex].label || '';
                                                                if (label) {
                                                                    label += ': ';
                                                                }
                                                                label += parseFloat(tooltipItem.value).toFixed(2);
                                                                return label;
                                                            }
                                                        }
                                                    }
                                                }
                                            };

                                            var chart = new Chart(ctx, cfg);

                                            document.getElementById('update').addEventListener('click', function () {
                                                var type = document.getElementById('type').value;
                                                var dataset = chart.config.data.datasets[0];
                                                dataset.type = type;
                                                dataset.data = generateData();
                                                chart.update();
                                            });

                                        </script>


                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
                <!-- content-wrapper ends -->
                <!-- partial:./partials/_footer.html -->
                <footer class="footer">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-sm-flex justify-content-center justify-content-sm-between py-2">
                                <p class="text-center text-sm-left d-block d-sm-inline-block mb-0">Copyright © 2021
                                    Energy
                                    Dash Team. All
                                    rights reserved.</p>
                            </div>
                        </div>
                    </div>
                </footer>
                <!-- partial -->
            </div>
            <!-- main-panel ends -->
        </div>
        <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->

    <!-- base:js -->
    <script src="../../vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->

    <!-- inject:js -->
    <script src="../../js/off-canvas.js"></script>
    <script src="../../js/hoverable-collapse.js"></script>
    <script src="../../js/template.js"></script>
    <!-- endinject -->


</body>

</html>
